<Macro Crowd_Proxy_ $(ssl) @frontServer $frontPath @protocol $backServer $backPort @backPath>
 Use Proxy$(ssl)Ext @frontServer "$frontPath" @protocol "$backServer" $backPort @backPath
 Use SecWebAppId Crowd
 Use UTF8Encoding "^$frontPath/"
 
 Use Atlassian "$frontPath"
  
 <Location $frontPath/>
  Use PackageSoftware
  Use DBNone
  Use SecAllowExt "action"
  
  # crowd... cookies accepted for all Atlassian products
  Use AcceptCookieRegex "[$]Path"
  # Allow $alpha in Cookie
  Use SecRuleRemoveById 4003113
  
  Use CSPAllowInternalScript
  # Because violated directive default-src?
  Use CSPAllowInternalStyle
  Use CSPAddDirective img-src "data:"
  
  Use SecAllowQueryInPost
  
  # X-Crowd-User-Management-Version, X-Embedded-Crowd-Version
 </Location>
 
 <Location $frontPath/console/secure>
  Use SecAllowCharsInUpDownDocs "!"
  Use SecRuleRemoveById 2001901
 </Location>

 <LocationMatch ^$frontPath/(?:crowdd/)?rest>
  Use AllowJSON
 </LocationMatch>
 
 <Location $frontPath/download>
  Use SecAllowDotInUrl
  Use SecUrlAllowChars ",:"
 </Location>

 Use AllowAndParseXML "^$frontPath/rest/usermanagement"
 <Location $frontPath/rest/usermanagement>
  Use AllowAutomatedTools
  Use SecAllowCharsInUpDownDocs ":%"
 </Location>
 
 <Location $frontPath/rest/usermanagement/authentication>
  Use SecPassword "password"
 </Location>
 
 <Location $frontPath/s>
  Use SecAllowDotInUrl
  Use SecUrlAllowChars ":,"
 </Location>
 
 
 </Macro>
<Macro Crowd_Proxy @frontServer @frontPath @protocol @backServer @backPort @backPath>
 Use Crowd_Proxy_ "" @frontServer @frontPath @protocol @backServer @backPort @backPath
</Macro>
<Macro Crowd_ProxySSL @frontServer @frontPath @protocol @backServer @backPort @backPath>
 Use Crowd_Proxy_ SSL @frontServer @frontPath @protocol @backServer @backPort @backPath
</Macro>
